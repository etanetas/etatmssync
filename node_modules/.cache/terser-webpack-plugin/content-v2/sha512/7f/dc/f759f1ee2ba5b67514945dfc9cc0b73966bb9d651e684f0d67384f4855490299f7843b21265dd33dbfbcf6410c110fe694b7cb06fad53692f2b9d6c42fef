{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"d\"],{\"./src/css/main.scss\":\n/*!***************************!*\\\n  !*** ./src/css/main.scss ***!\n  \\***************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(/*! ../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\")(false);\\n// Module\\nexports.push([module.i, \".etatms_settings_view, .etatms_tariffs_view {\\\\n  margin: 0 auto; }\\\\n\\\\n.etatms_button {\\\\n  cursor: pointer;\\\\n  padding: 2px; }\\\\n\\\\n.etatms_header {\\\\n  display: flex;\\\\n  justify-content: space-between;\\\\n  align-items: center;\\\\n  font-size: 2em;\\\\n  font-weight: bold;\\\\n  margin-bottom: 0.2em; }\\\\n  .etatms_header_title {\\\\n    display: inline-flex; }\\\\n  .etatms_header_syncbutton {\\\\n    display: inline-flex;\\\\n    cursor: pointer;\\\\n    color: #A5673F !important;\\\\n    border-color: #A5673F !important;\\\\n    outline: none;\\\\n    align-items: center;\\\\n    user-select: none;\\\\n    text-decoration: none;\\\\n    border: 1px solid rgba(0, 0, 0, 0.23);\\\\n    letter-spacing: 0.02857em;\\\\n    line-height: 1.75;\\\\n    border-radius: 0.28571429rem;\\\\n    font-weight: 500;\\\\n    font-family: \\\\\"Roboto\\\\\",\\\\\"Helvetica\\\\\",\\\\\"Arial\\\\\", sans-serif;\\\\n    box-sizing: border-box;\\\\n    min-width: 64px;\\\\n    font-size: 0.875rem;\\\\n    background: transparent; }\\\\n    .etatms_header_syncbutton_error {\\\\n      color: #DB2828 !important;\\\\n      border-color: #DB2828 !important; }\\\\n\\\\n.etatms_row {\\\\n  width: 80%;\\\\n  padding: 5px; }\\\\n  .etatms_row-centered {\\\\n    margin: 0 auto;\\\\n    text-align: center; }\\\\n\\\\n.etatms_tariffs_new {\\\\n  padding-right: 10px;\\\\n  display: inline-flex; }\\\\n\\\\n.etatms_tariffs_content {\\\\n  max-height: 600px; }\\\\n\\\\n.etatms_tariffs_header {\\\\n  display: block;\\\\n  background: #CEBD9B;\\\\n  border: 1px solid black;\\\\n  padding: 5px 0; }\\\\n  .etatms_tariffs_header_tmsid {\\\\n    justify-content: start !important; }\\\\n  .etatms_tariffs_header_lmsids {\\\\n    justify-content: start !important; }\\\\n\\\\n.etatms_tariffs_row {\\\\n  display: flex;\\\\n  border-bottom: 1px dotted grey; }\\\\n\\\\n.etatms_tariffs_row:nth-child(even) {\\\\n  background-color: #DFD5BD; }\\\\n\\\\n.etatms_tariffs_tmsid {\\\\n  display: inline-flex;\\\\n  width: 19%;\\\\n  align-items: center;\\\\n  padding-left: 10px;\\\\n  justify-content: space-between; }\\\\n\\\\n.etatms_tariffs_lmsids {\\\\n  align-items: center;\\\\n  display: inline-flex;\\\\n  flex-wrap: wrap; }\\\\n\\\\n.etatms_tariffs_tmsbuttons {\\\\n  display: inline-block;\\\\n  padding-right: 20px; }\\\\n  .etatms_tariffs_tmsbuttons i {\\\\n    margin-left: 2px;\\\\n    margin-right: 2px; }\\\\n  .etatms_tariffs_tmsbuttons_commit {\\\\n    display: none; }\\\\n    .etatms_tariffs_tmsbuttons_commit-show {\\\\n      display: inline-block; }\\\\n\\\\n.etatms_tariffs_lmsids {\\\\n  width: 80%; }\\\\n\\\\n.etatms_tariffs_lmstariff {\\\\n  padding: 2px 5px;\\\\n  position: relative;\\\\n  margin: 2px;\\\\n  border-radius: .25rem;\\\\n  border: 1px solid rgba(0, 0, 0, 0.125);\\\\n  display: inline-block; }\\\\n  .etatms_tariffs_lmstariff_delete {\\\\n    display: inline-block;\\\\n    padding-left: 5px; }\\\\n\\\\n.etatms_column_label, .etatms_column_value {\\\\n  display: inline-block; }\\\\n\\\\n.etatms_column_label {\\\\n  width: 10%;\\\\n  text-align: right;\\\\n  padding-right: 10px; }\\\\n\\\\n.etatms_column_value {\\\\n  text-align: left;\\\\n  padding-left: 10px; }\\\\n\", \"\"]);\\n\\n\\n\\n//# sourceURL=webpack:///./src/css/main.scss?')},\"./src/js/common.js\":\n/*!**************************!*\\\n  !*** ./src/js/common.js ***!\n  \\**************************/\n/*! exports provided: TmsObj, filterLmsTariffs, getFirstParentByClass, addLmsTariff, eventRemoveLmsTariff, removeLmsTariff, getLmsTariff, eventCommitTmsTariff, resetTmsRow, commitTariff, createAddLmsTariffElement */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"TmsObj\", function() { return TmsObj; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"filterLmsTariffs\", function() { return filterLmsTariffs; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getFirstParentByClass\", function() { return getFirstParentByClass; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"addLmsTariff\", function() { return addLmsTariff; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eventRemoveLmsTariff\", function() { return eventRemoveLmsTariff; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"removeLmsTariff\", function() { return removeLmsTariff; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLmsTariff\", function() { return getLmsTariff; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"eventCommitTmsTariff\", function() { return eventCommitTmsTariff; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"resetTmsRow\", function() { return resetTmsRow; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"commitTariff\", function() { return commitTariff; });\\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"createAddLmsTariffElement\", function() { return createAddLmsTariffElement; });\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _lmsTariff_lmsTariff_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lmsTariff/lmsTariff.js */ \"./src/js/lmsTariff/lmsTariff.js\");\\n/* harmony import */ var _searchBox_searchbox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./searchBox/searchbox.js */ \"./src/js/searchBox/searchbox.js\");\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n\\n\\n\\nvar TmsObj =\\n/*#__PURE__*/\\nfunction () {\\n  function TmsObj() {\\n    _classCallCheck(this, TmsObj);\\n\\n    this.id = null;\\n    this.lmsTariffs = [];\\n    this.orig = null;\\n    this.trigger = false;\\n    this.el = null;\\n  }\\n\\n  _createClass(TmsObj, [{\\n    key: \"changedLms\",\\n    value: function changedLms() {\\n      if (JSON.stringify(this.orig.lmsTariffs) != JSON.stringify(this.lmsTariffs)) {\\n        return true;\\n      }\\n\\n      return false;\\n    }\\n  }, {\\n    key: \"changed\",\\n    value: function changed() {\\n      return false;\\n    }\\n  }, {\\n    key: \"showCommit\",\\n    value: function showCommit() {\\n      var btn = this.el.querySelector(\".etatms_tariffs_tmsbuttons_commit\");\\n\\n      if (btn) {\\n        btn.classList.add(\"etatms_tariffs_tmsbuttons_commit-show\");\\n      }\\n    }\\n  }, {\\n    key: \"hideCommit\",\\n    value: function hideCommit() {\\n      var btn = this.el.querySelector(\".etatms_tariffs_tmsbuttons_commit\");\\n\\n      if (btn) {\\n        btn.classList.remove(\"etatms_tariffs_tmsbuttons_commit-show\");\\n      }\\n    }\\n  }]);\\n\\n  return TmsObj;\\n}();\\n\\nfunction lmsTariffInArray(tariffID, tariffsList) {\\n  for (var i in tariffsList) {\\n    if (tariffsList[i].id == tariffID) {\\n      return true;\\n    }\\n  }\\n\\n  return false;\\n}\\n\\nfunction filterLmsTariffs(e, sb, lmsTariffs) {\\n  var lmsIds = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\\n  var url = \"/?m=etatmssynctariffs&ajax=lmstariffs\";\\n\\n  if (e.target.value) {\\n    url += \"&q=\".concat(e.target.value);\\n  }\\n\\n  sb.setLoading();\\n  axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(url).then(function (r) {\\n    if (r.data) {\\n      lmsTariffs = [];\\n      r.data.forEach(function (val) {\\n        if (lmsIds) {\\n          if (!lmsTariffInArray(val.id, lmsIds)) {\\n            var tObj = {\\n              \"value\": val.name,\\n              \"id\": val.id\\n            };\\n            lmsTariffs.push(tObj);\\n          }\\n        } else {\\n          var _tObj = {\\n            \"value\": val.name,\\n            \"id\": val.id\\n          };\\n          lmsTariffs.push(_tObj);\\n        }\\n      });\\n    }\\n\\n    sb.setContent(lmsTariffs);\\n    sb.unsetLoading();\\n  });\\n}\\nfunction getFirstParentByClass(el, className) {\\n  var node = null;\\n\\n  if (className == \"\") {\\n    return node;\\n  }\\n\\n  while (el.parentNode && el.parentNode.classList) {\\n    var nel = el.parentNode;\\n\\n    if (el.parentNode.classList.contains(className)) {\\n      return nel;\\n    } else {\\n      el = nel;\\n    }\\n  }\\n\\n  return;\\n}\\nfunction addLmsTariff(id, name, parent, tmsRow) {\\n  var lmsTariff = new _lmsTariff_lmsTariff_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\\n    id: id,\\n    name: name\\n  });\\n\\n  lmsTariff.removeEvent = function (e) {\\n    if (tmsRow) {\\n      eventRemoveLmsTariff(e, null, tmsRow);\\n    }\\n  };\\n\\n  var el = lmsTariff.render();\\n  parent.appendChild(el);\\n\\n  if (tmsRow) {\\n    tmsRow.lmsTariffs.push({\\n      id: id,\\n      name: name,\\n      el: el\\n    });\\n  }\\n\\n  return el;\\n}\\nfunction eventRemoveLmsTariff(e, tmsSync, tmsRow) {\\n  var lmsID = null;\\n  var tmsID = null;\\n  var lmsPar = getFirstParentByClass(e.target, \"etatms_tariffs_lmstariff\");\\n\\n  if (lmsPar) {\\n    lmsID = lmsPar.getAttribute(\"data-etatms-lmsid\");\\n  }\\n\\n  var tmsPar = getFirstParentByClass(e.target, \"etatms_tariffs_row\");\\n\\n  if (tmsPar) {\\n    tmsID = tmsPar.getAttribute(\"data-etatms-tmsid\");\\n  }\\n\\n  if (lmsID) {\\n    if (tmsRow) {\\n      removeLmsTariff(tmsRow, lmsID);\\n    } else if (tmsID && tmsSync[tmsID]) {\\n      tmsRow = tmsSync[tmsID];\\n      removeLmsTariff(tmsRow, lmsID);\\n    } else {\\n      console.error(\"Failed to find required tmsRow, tmsid:\".concat(tmsRow));\\n    }\\n  } else {\\n    console.error(\"Failed to find required lmsid:\".concat(lmsID));\\n  }\\n}\\nfunction removeLmsTariff(tmsRow, lmsid) {\\n  if (tmsRow) {\\n    var lmsTariffItem = getLmsTariff(tmsRow.lmsTariffs, lmsid);\\n    tmsRow.lmsTariffs.splice(lmsTariffItem.ind, 1);\\n    lmsTariffItem.item.el.remove();\\n  } else {\\n    console.warn(\"Can\\'t find tms tariff\");\\n  }\\n}\\nfunction getLmsTariff(lmsTariffs, lmsid) {\\n  for (var i in lmsTariffs) {\\n    if (lmsTariffs[i].id == lmsid) {\\n      return {\\n        ind: i,\\n        item: lmsTariffs[i]\\n      };\\n    }\\n  }\\n}\\nfunction eventCommitTmsTariff(tmsRow) {}\\nfunction resetTmsRow(tmsRow) {}\\nfunction commitTariff(tariff) {\\n  var data = {\\n    id: tariff.syncID,\\n    tmsID: tariff.id,\\n    lmsTariffs: tariff.lmsTariffs\\n  };\\n  var buttonsArea = tariff.el.getElementsByClassName(\"etatms_tariffs_tmsbuttons\");\\n  var keepElement = null;\\n  var loader = document.createElement(\"i\");\\n  loader.classList = \"fa fa-spinner fa-spin\";\\n  loader.style.marginRight = \"20px\";\\n\\n  if (buttonsArea && buttonsArea[0]) {\\n    keepElement = buttonsArea[0];\\n    keepElement.parentNode.replaceChild(loader, keepElement);\\n  }\\n\\n  return new Promise(function (resolve, reject) {\\n    var url = \"/?m=etatmssynctariffs&ajax=commit\";\\n    axios__WEBPACK_IMPORTED_MODULE_0___default.a.post(url, data).then(function (resp) {\\n      loader.parentNode.replaceChild(keepElement, loader);\\n      resolve(resp);\\n    })[\"catch\"](function (err) {\\n      loader.parentNode.replaceChild(keepElement, loader);\\n      reject(err);\\n    });\\n  });\\n}\\nfunction createAddLmsTariffElement(triggeredElement, rowObj, lmsTariffs) {\\n  var buttonAddTmp = rowObj.el.getElementsByClassName(\"etatms_tariffs_lmstariff_add\");\\n  var buttonAdd = null;\\n\\n  if (buttonAddTmp && buttonAddTmp[0]) {\\n    buttonAdd = buttonAddTmp[0];\\n  } // let buttonAdd = getFirstParentByClass(triggeredElement, \"etatms_tariffs_lmstariff_add\");\\n  // const parent = buttonAdd.parentNode;\\n\\n\\n  if (!buttonAdd) {\\n    return;\\n  }\\n\\n  var sb = new _searchBox_searchbox_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\\n  var el = document.createElement(\\'div\\');\\n  var parent = null;\\n  var parentTmp = rowObj.el.getElementsByClassName(\"etatms_tariffs_lmsids\");\\n\\n  if (parentTmp && parentTmp[0]) {\\n    parent = parentTmp[0];\\n  }\\n\\n  buttonAdd.remove();\\n  el.setAttribute(\"data-etatms-addLmsTariff\", \"\");\\n  el.classList = [\"etatms_tariffs_lmstariff\"];\\n  el.appendChild(sb.render(function (e) {\\n    filterLmsTariffs(e, sb, lmsTariffs, rowObj.lmsTariffs);\\n  }));\\n  sb.setContent(lmsTariffs);\\n  var elOK = document.createElement(\"i\");\\n\\n  var saveEvent = function saveEvent(e) {\\n    if (sb.selectedContent && sb.selectedContent.id) {\\n      var tmsPar = getFirstParentByClass(el, \"etatms_tariffs_row\");\\n\\n      if (tmsPar) {\\n        var tmsID = tmsPar.getAttribute(\"data-etatms-tmsid\");\\n        addLmsTariff(sb.selectedContent.id, sb.selectedContent.value, parent, rowObj);\\n        el.remove();\\n        parent.appendChild(buttonAdd);\\n      }\\n    }\\n  };\\n\\n  elOK.classList = [\"fa fa-check etatms_tariffs_lmstariff_add\"];\\n  elOK.addEventListener(\"click\", saveEvent); //  e=>{\\n  //   saveEvent();\\n  // if(sb.selectedContent && sb.selectedContent.id){\\n  //   let tmsPar = getFirstParentByClass(el, \"etatms_tariffs_row\");\\n  //   if(tmsPar){\\n  //     const tmsID = tmsPar.getAttribute(\"data-etatms-tmsid\");\\n  //   addLmsTariff(sb.selectedContent.id, sb.selectedContent.value, parent, rowObj);\\n  //   el.remove()\\n  //   parent.appendChild(buttonAdd);\\n  //   }\\n  // }\\n  // })\\n\\n  sb.save = saveEvent;\\n  el.appendChild(elOK);\\n  var elCancel = document.createElement(\"i\");\\n  elCancel.classList = [\"fa fa-times etatms_tariffs_lmstariff_cancel\"];\\n  el.appendChild(elCancel);\\n  elCancel.addEventListener(\"click\", function (e) {\\n    el.remove();\\n    parent.appendChild(buttonAdd);\\n  });\\n  parent.appendChild(el);\\n\\n  sb.close = function (e) {\\n    el.remove();\\n    parent.appendChild(buttonAdd);\\n  };\\n}\\n\\n//# sourceURL=webpack:///./src/js/common.js?')},\"./src/js/config.js\":\n/*!**************************!*\\\n  !*** ./src/js/config.js ***!\n  \\**************************/\n/*! no exports provided */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _css_main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/main.scss */ \"./src/css/main.scss\");\\n/* harmony import */ var _css_main_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_css_main_scss__WEBPACK_IMPORTED_MODULE_0__);\\n\\nvar settingsForm = document.querySelector(\"#settings\");\\nsettingsForm.addEventListener(\"submit\", function (e) {\\n  e.preventDefault();\\n  console.log(\"sss\");\\n  e.target.submit();\\n});\\n\\n//# sourceURL=webpack:///./src/js/config.js?')},\"./src/js/lmsTariff/lmsTariff.css\":\n/*!****************************************!*\\\n  !*** ./src/js/lmsTariff/lmsTariff.css ***!\n  \\****************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\")(false);\\n// Module\\nexports.push([module.i, \"\", \"\"]);\\n\\n\\n\\n//# sourceURL=webpack:///./src/js/lmsTariff/lmsTariff.css?')},\"./src/js/lmsTariff/lmsTariff.js\":\n/*!***************************************!*\\\n  !*** ./src/js/lmsTariff/lmsTariff.js ***!\n  \\***************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _lmsTariff_tmpl_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lmsTariff.tmpl.html */ \"./src/js/lmsTariff/lmsTariff.tmpl.html\");\\n/* harmony import */ var _lmsTariff_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lmsTariff.css */ \"./src/js/lmsTariff/lmsTariff.css\");\\n/* harmony import */ var _lmsTariff_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lmsTariff_css__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var hogan_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hogan.js */ \"./node_modules/hogan.js/lib/hogan.js\");\\n/* harmony import */ var hogan_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hogan_js__WEBPACK_IMPORTED_MODULE_2__);\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n\\n\\n\\n\\nvar lmsTariff =\\n/*#__PURE__*/\\nfunction () {\\n  function lmsTariff(lmsObj) {\\n    _classCallCheck(this, lmsTariff);\\n\\n    this.el = null;\\n    this.id = \"\";\\n\\n    if (lmsObj.id) {\\n      this.id = lmsObj.id;\\n    }\\n\\n    this.name = \"\";\\n\\n    if (lmsObj.name) {\\n      this.name = lmsObj.name;\\n    }\\n\\n    this.removeEvent = function (e) {\\n      console.log(\"not implemented\");\\n    };\\n  }\\n\\n  _createClass(lmsTariff, [{\\n    key: \"close\",\\n    value: function close() {\\n      this.el.remove();\\n    }\\n  }, {\\n    key: \"render\",\\n    value: function render() {\\n      var _this = this;\\n\\n      var parser = new DOMParser();\\n      var htmpl = hogan_js__WEBPACK_IMPORTED_MODULE_2___default.a.compile(_lmsTariff_tmpl_html__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\\n      var html = parser.parseFromString(htmpl.render({\\n        id: this.id,\\n        name: this.name\\n      }), \"text/html\");\\n      var els = html.getElementsByTagName(\"div\");\\n\\n      if (els) {\\n        this.el = els[0];\\n      }\\n\\n      var rmButtonTmp = this.el.getElementsByClassName(\\'etatms_tariffs_lmstariff_delete\\');\\n\\n      if (rmButtonTmp) {\\n        rmButtonTmp[0].addEventListener(\\'click\\', this.removeEvent);\\n      }\\n\\n      return this.el;\\n    }\\n  }]);\\n\\n  return lmsTariff;\\n}();\\n\\n/* harmony default export */ __webpack_exports__[\"default\"] = (lmsTariff);\\n\\n//# sourceURL=webpack:///./src/js/lmsTariff/lmsTariff.js?')},\"./src/js/lmsTariff/lmsTariff.tmpl.html\":\n/*!**********************************************!*\\\n  !*** ./src/js/lmsTariff/lmsTariff.tmpl.html ***!\n  \\**********************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\\\"etatms_tariffs_lmstariff\\\\\" data-etatms-lmsid=\\\\\"{{id}}\\\\\">\\\\n    {{name}}({{id}}) <div class=\\\\\"etatms_button etatms_tariffs_lmstariff_delete\\\\\"><i class=\\\\\"fa fa-minus\\\\\" aria-hidden=\\\\\"true\\\\\"></i></div>\\\\n</div>\");\\n\\n//# sourceURL=webpack:///./src/js/lmsTariff/lmsTariff.tmpl.html?')},\"./src/js/searchBox/searchbox.css\":\n/*!****************************************!*\\\n  !*** ./src/js/searchBox/searchbox.css ***!\n  \\****************************************/\n/*! no static exports found */function(module,exports,__webpack_require__){eval('exports = module.exports = __webpack_require__(/*! ../../../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\")(false);\\n// Module\\nexports.push([module.i, \".etatms_searchbox_input {\\\\n  box-sizing: border-box;\\\\n  padding-right: 20px;\\\\n  resize: horizontal;\\\\n  background-position: 14px 12px;\\\\n  background-repeat: no-repeat;\\\\n  font-size: 16px;\\\\n  padding: 14px 20px 12px 45px;\\\\n  border: none;\\\\n  border-bottom: 1px solid #ddd; }\\\\n\\\\n.etatms_searchbox_input:focus {\\\\n  outline: 3px solid #ddd; }\\\\n\\\\n.etatms_searchbox {\\\\n  position: relative;\\\\n  display: inline-block; }\\\\n\\\\n.etatms_searchbox-selected {\\\\n  background-color: #ddd; }\\\\n\\\\n.etatms_searchbox-content {\\\\n  display: none;\\\\n  position: absolute;\\\\n  overflow-y: auto;\\\\n  background-color: #f6f6f6;\\\\n  min-width: 230px;\\\\n  max-height: 300px;\\\\n  overflow: auto;\\\\n  border: 1px solid #ddd;\\\\n  z-index: 1; }\\\\n\\\\n.etatms_searchbox-content_show {\\\\n  display: block; }\\\\n\\\\n.etatms_searchbox-content a {\\\\n  color: black;\\\\n  padding: 12px 16px;\\\\n  text-decoration: none;\\\\n  display: block; }\\\\n\\\\n.etatms_searchbox-loading {\\\\n  display: none;\\\\n  margin-left: -20px; }\\\\n\\\\n.etatms_searchbox-loading_show {\\\\n  display: inline-block; }\\\\n\", \"\"]);\\n\\n\\n\\n//# sourceURL=webpack:///./src/js/searchBox/searchbox.css?')},\"./src/js/searchBox/searchbox.js\":\n/*!***************************************!*\\\n  !*** ./src/js/searchBox/searchbox.js ***!\n  \\***************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _searchbox_tmpl_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./searchbox.tmpl.html */ \"./src/js/searchBox/searchbox.tmpl.html\");\\n/* harmony import */ var _searchbox_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./searchbox.css */ \"./src/js/searchBox/searchbox.css\");\\n/* harmony import */ var _searchbox_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_searchbox_css__WEBPACK_IMPORTED_MODULE_1__);\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n\\n\\n\\nvar searchbox =\\n/*#__PURE__*/\\nfunction () {\\n  function searchbox() {\\n    _classCallCheck(this, searchbox);\\n\\n    this.el = null;\\n    this.selectedElement = null;\\n    this.selectedClass = \"etatms_searchbox-selected\";\\n    this.contentElement = null;\\n    this.selectedContent = null;\\n    this.content = [];\\n  }\\n\\n  _createClass(searchbox, [{\\n    key: \"getContentElement\",\\n    value: function getContentElement() {\\n      if (this.contentElement) {\\n        return this.contentElement;\\n      }\\n\\n      var elsContent = this.el.getElementsByClassName(\\'etatms_searchbox-content\\');\\n\\n      if (elsContent) {\\n        this.contentElement = elsContent[0];\\n        return this.contentElement;\\n      } else {\\n        return document.createElement(\\'div\\');\\n      }\\n    }\\n  }, {\\n    key: \"show\",\\n    value: function show() {\\n      this.getContentElement().classList.add(\"etatms_searchbox-content_show\");\\n    }\\n  }, {\\n    key: \"hide\",\\n    value: function hide() {\\n      this.getContentElement().classList.remove(\"etatms_searchbox-content_show\");\\n    }\\n  }, {\\n    key: \"setSelected\",\\n    value: function setSelected(newEl) {\\n      if (newEl) {\\n        if (this.selectedElement) {\\n          this.selectedElement.classList.remove(this.selectedClass);\\n        }\\n\\n        newEl.classList.add(this.selectedClass);\\n        newEl.scrollIntoView({\\n          block: \"nearest\"\\n        });\\n        this.selectedElement = newEl;\\n      }\\n    }\\n  }, {\\n    key: \"setLoading\",\\n    value: function setLoading() {\\n      var els = this.el.getElementsByClassName(\"etatms_searchbox-loading\");\\n\\n      if (els) {\\n        els[0].classList.add(\"etatms_searchbox-loading_show\");\\n      }\\n    }\\n  }, {\\n    key: \"unsetLoading\",\\n    value: function unsetLoading() {\\n      var els = this.el.getElementsByClassName(\"etatms_searchbox-loading\");\\n\\n      if (els) {\\n        els[0].classList.remove(\"etatms_searchbox-loading_show\");\\n      }\\n    }\\n  }, {\\n    key: \"selectNext\",\\n    value: function selectNext() {\\n      if (this.selectedElement && this.selectedElement.nextSibling) {\\n        this.setSelected(this.selectedElement.nextSibling);\\n      } else {\\n        if (this.content[0]) {\\n          this.setSelected(this.content[0].el);\\n        }\\n      }\\n    }\\n  }, {\\n    key: \"selectPrevious\",\\n    value: function selectPrevious() {\\n      if (this.selectedElement && this.selectedElement.previousSibling) {\\n        this.setSelected(this.selectedElement.previousSibling);\\n      } else {\\n        if (this.content[0]) {\\n          this.setSelected(this.content[this.content.length - 1].el);\\n        }\\n      }\\n    }\\n  }, {\\n    key: \"renderContent\",\\n    value: function renderContent() {\\n      var _this = this;\\n\\n      var contentEl = this.getContentElement();\\n      contentEl.innerHTML = \"\";\\n\\n      if (this.content.length > 0) {\\n        this.setSelected(this.content[0].el);\\n        this.content.forEach(function (v) {\\n          contentEl.appendChild(v.el);\\n        });\\n      }\\n    }\\n  }, {\\n    key: \"setPlaceholder\",\\n    value: function setPlaceholder(placeHolder) {\\n      this.placeHolder = placeHolder;\\n    }\\n  }, {\\n    key: \"setContent\",\\n    value: function setContent(contentData) {\\n      var _this2 = this;\\n\\n      var _this = this;\\n\\n      this.content = [];\\n\\n      if (contentData) {\\n        var i = 0;\\n        contentData.forEach(function (v) {\\n          var contentObj = {};\\n          contentObj.el = document.createElement(\"a\");\\n\\n          if (v.value) {\\n            contentObj.el.innerHTML = v.value;\\n            contentObj.value = v.value;\\n            contentObj.id = v.id;\\n          } else {\\n            contentObj.el.innerHTML = v;\\n            contentObj.value = v;\\n          }\\n\\n          contentObj.el.setAttribute(\"data-etatms-ind\", i);\\n          contentObj.el.addEventListener(\\'mouseenter\\', function (e) {\\n            _this.setSelected(e.target);\\n          });\\n          contentObj.el.addEventListener(\\'click\\', function (e) {\\n            var selectedID = e.target.getAttribute(\"data-etatms-ind\");\\n\\n            if (selectedID) {\\n              var inputs = _this2.el.getElementsByTagName(\"input\");\\n\\n              if (inputs) {\\n                var input = inputs[0];\\n                input.value = _this2.content[selectedID].value;\\n                _this2.selectedContent = _this2.content[selectedID];\\n\\n                _this.hide();\\n              }\\n            }\\n          });\\n\\n          _this.content.push(contentObj);\\n\\n          i++;\\n        });\\n      }\\n\\n      this.renderContent();\\n    }\\n  }, {\\n    key: \"clear\",\\n    value: function clear() {\\n      this.el = null;\\n      this.selectedElement = null;\\n      this.contentElement = null;\\n      this.content = [];\\n    }\\n  }, {\\n    key: \"close\",\\n    value: function close() {\\n      this.el.remove();\\n      this.clear();\\n    }\\n  }, {\\n    key: \"save\",\\n    value: function save() {}\\n  }, {\\n    key: \"render\",\\n    value: function render(inputCallback) {\\n      var _this3 = this;\\n\\n      this.clear();\\n      var parser = new DOMParser();\\n      var html = parser.parseFromString(_searchbox_tmpl_html__WEBPACK_IMPORTED_MODULE_0__[\"default\"], \"text/html\");\\n      var els = html.getElementsByTagName(\"div\");\\n\\n      var _this = this;\\n\\n      if (els) {\\n        this.el = els[0];\\n        var inputs = this.el.getElementsByTagName(\"input\");\\n\\n        if (inputs) {\\n          var input = inputs[0];\\n\\n          if (this.placeHolder) {\\n            input.placeholder = this.placeHolder;\\n          }\\n\\n          input.addEventListener(\"focus\", function (e) {\\n            inputCallback(e);\\n\\n            _this3.show();\\n          });\\n          input.addEventListener(\"keydown\", function (e) {\\n            switch (e.keyCode) {\\n              case 38:\\n                //up\\n                if (_this.getContentElement().classList.contains(\"etatms_searchbox-content_show\")) {\\n                  e.preventDefault();\\n\\n                  _this.selectPrevious();\\n\\n                  break;\\n                }\\n\\n                break;\\n\\n              case 40:\\n                //down\\n                if (_this.getContentElement().classList.contains(\"etatms_searchbox-content_show\")) {\\n                  e.preventDefault();\\n\\n                  _this.selectNext();\\n\\n                  break;\\n                }\\n\\n              default:\\n            }\\n          });\\n          input.addEventListener(\"keyup\", function (e) {\\n            if (_this.contentElement.style.display == \"none\") {\\n              _this.show();\\n            }\\n\\n            switch (e.keyCode) {\\n              case 13:\\n                //enter\\n                var selectedID = _this3.selectedElement.getAttribute(\"data-etatms-ind\");\\n\\n                if (!_this3.getContentElement().classList.contains(\"etatms_searchbox-content_show\") && _this3.selectedContent) {\\n                  _this3.save();\\n                }\\n\\n                if (selectedID) {\\n                  e.target.value = _this3.content[selectedID].value;\\n                  _this3.selectedContent = _this3.content[selectedID];\\n\\n                  _this.hide();\\n                }\\n\\n                break;\\n\\n              case 38:\\n                if (!_this.getContentElement().classList.contains(\"etatms_searchbox-content_show\")) {\\n                  _this.show();\\n                } else {\\n                  break;\\n                }\\n\\n              case 40:\\n                if (!_this.getContentElement().classList.contains(\"etatms_searchbox-content_show\")) {\\n                  _this.show();\\n                } else {\\n                  break;\\n                }\\n\\n              case 27:\\n                if (_this.getContentElement().classList.contains(\"etatms_searchbox-content_show\")) {\\n                  _this.hide();\\n                } else {\\n                  _this.close();\\n                }\\n\\n                break;\\n\\n              default:\\n                if (inputCallback) {\\n                  inputCallback(e, _this);\\n                }\\n\\n                break;\\n            }\\n          });\\n        }\\n      }\\n\\n      return this.el;\\n    }\\n  }]);\\n\\n  return searchbox;\\n}();\\n\\n/* harmony default export */ __webpack_exports__[\"default\"] = (searchbox);\\n\\n//# sourceURL=webpack:///./src/js/searchBox/searchbox.js?')},\"./src/js/searchBox/searchbox.tmpl.html\":\n/*!**********************************************!*\\\n  !*** ./src/js/searchBox/searchbox.tmpl.html ***!\n  \\**********************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\\\"etatms_searchbox\\\\\">\\\\n  <input type=\\\\\"text\\\\\" placeholder=\\\\\"Search..\\\\\" class=\\\\\"etatms_searchbox-input\\\\\">\\\\n  <i class=\\\\\"fa fa-spinner fa-spin etatms_searchbox-loading\\\\\" aria-hidden=\\\\\"true\\\\\"></i>\\\\n  <div class=\\\\\"etatms_searchbox-content\\\\\">\\\\n  </div>\\\\n</div>\");\\n\\n//# sourceURL=webpack:///./src/js/searchBox/searchbox.tmpl.html?')},\"./src/js/tariffs.js\":\n/*!***************************!*\\\n  !*** ./src/js/tariffs.js ***!\n  \\***************************/\n/*! no exports provided */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _tmsTariff_tmsTariff__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tmsTariff/tmsTariff */ \"./src/js/tmsTariff/tmsTariff.js\");\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_1__);\\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common */ \"./src/js/common.js\");\\n/* harmony import */ var _css_main_scss__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../css/main.scss */ \"./src/css/main.scss\");\\n/* harmony import */ var _css_main_scss__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_css_main_scss__WEBPACK_IMPORTED_MODULE_3__);\\n\\n\\n\\n\\nvar lmsTariffs = [];\\n\\nfunction getTmsTariffHandler(rObj) {\\n  return {\\n    set: function set(obj, prop, value) {\\n      if (obj.changed() || obj.changedLms()) {\\n        rObj.showCommit();\\n      } else {\\n        rObj.hideCommit();\\n      }\\n\\n      obj[prop] = value;\\n      return true;\\n    }\\n  };\\n}\\n\\nfunction getLmsTariffsHandler(obj) {\\n  return {\\n    set: function set(target, props, newVal) {\\n      target[props] = newVal;\\n\\n      if (obj.changedLms() || obj.changed()) {\\n        obj.showCommit();\\n      } else {\\n        obj.hideCommit();\\n      }\\n\\n      return true;\\n      gg;\\n    },\\n    get: function get(target, props) {\\n      return target[props];\\n    }\\n  };\\n}\\n\\nvar tmsSync = {};\\nvar newTmsTariff = null;\\nvar handler = {};\\n\\nfunction init() {\\n  var btnAddTmsTariff = document.querySelector(\".etatms_tariffs_tmstariff_add\");\\n\\n  if (btnAddTmsTariff) {\\n    btnAddTmsTariff.addEventListener(\"click\", eventAddTmsTariff);\\n  }\\n\\n  var btnSyncMiddleware = document.querySelector(\\'.etatms_header_syncbutton\\');\\n  btnSyncMiddleware.addEventListener(\"click\", function (e) {\\n    btnSyncMiddleware.classList.remove(\"etatms_header_syncbutton_error\");\\n    var btnContent = btnSyncMiddleware.innerHTML;\\n    var loader = document.createElement(\"i\");\\n    loader.classList = \"fa fa-spinner fa-spin\";\\n    btnSyncMiddleware.prepend(loader);\\n    btnSyncMiddleware.classList.add(\"button-centered\");\\n    runMiddlewareSync().then(function (r) {\\n      loader.remove();\\n    })[\"catch\"](function (err) {\\n      console.log(\"err\");\\n      loader.remove();\\n      btnSyncMiddleware.classList.add(\"etatms_header_syncbutton_error\");\\n    });\\n  });\\n  var rows = document.querySelectorAll(\".etatms_tariffs_row\");\\n\\n  if (rows) {\\n    var pat = /\\\\d+/;\\n\\n    for (var i in rows) {\\n      if (!pat.test(i)) {\\n        continue;\\n      }\\n\\n      var el = rows[i];\\n      var rObj = new _common__WEBPACK_IMPORTED_MODULE_2__[\"TmsObj\"]();\\n      var id = el.getAttribute(\"data-etatms-tmsid\");\\n\\n      if (!id) {\\n        console.error(\"Failed to get tms id\");\\n      }\\n\\n      var name = el.getAttribute(\"data-etatms-tmsname\");\\n\\n      if (!name) {\\n        console.error(\"Failed to get tms name\");\\n      }\\n\\n      var syncid = el.getAttribute(\"data-etatms-id\");\\n\\n      if (!syncid) {\\n        console.error(\"Failed to get sync id\");\\n      }\\n\\n      rObj.el = el;\\n      rObj.id = id;\\n      rObj.syncID = syncid;\\n      rObj.name = name;\\n      var _lmsTariffs = [];\\n      var lmsTariffsTmp = el.getElementsByClassName(\"etatms_tariffs_lmstariff\");\\n\\n      for (var _i in lmsTariffsTmp) {\\n        if (lmsTariffsTmp[_i]) {\\n          var lmsEl = lmsTariffsTmp[_i];\\n\\n          if (lmsEl.tagName) {\\n            var lmsID = lmsEl.getAttribute(\"data-etatms-lmsid\");\\n            var lmsName = lmsEl.getAttribute(\"data-etatms-lmsname\");\\n\\n            if (lmsID) {\\n              _lmsTariffs.push({\\n                id: lmsID,\\n                name: lmsName,\\n                el: lmsEl\\n              });\\n            }\\n          }\\n        }\\n      }\\n\\n      var origObj = Object.assign({}, rObj);\\n      rObj.orig = origObj;\\n      var lmsTariffsOrig = Object.assign([], _lmsTariffs);\\n      rObj.orig.lmsTariffs = lmsTariffsOrig;\\n      rObj.lmsTariffs = new Proxy(_lmsTariffs, getLmsTariffsHandler(rObj));\\n      tmsSync[id] = new Proxy(rObj, getTmsTariffHandler(rObj));\\n      addRowEvents(rObj);\\n    }\\n  }\\n}\\n\\nfunction runMiddlewareSync() {\\n  return new Promise(function (resolve, reject) {\\n    axios__WEBPACK_IMPORTED_MODULE_1___default.a.post(\"/?m=etatmssynctariffs&ajax=syncmiddleware\").then(function (r) {\\n      resolve();\\n    })[\"catch\"](function (err) {\\n      reject(err);\\n    });\\n  });\\n}\\n\\nfunction showCommit(tariffEl) {\\n  var btn = tariffEl.getElementsByClassName(\"etatms_tariffs_tmsbuttons_commit\");\\n\\n  if (btn) {\\n    btn[0].classList.add(\"etatms_tariffs_tmsbuttons_commit-show\");\\n  }\\n}\\n\\nfunction hideCommit(tariffEl) {\\n  var btn = tariffEl.getElementsByClassName(\"etatms_tariffs_tmsbuttons_commit\");\\n\\n  if (btn) {\\n    btn[0].classList.remove(\"etatms_tariffs_tmsbuttons_commit-show\");\\n  }\\n}\\n\\nfunction addRowEvents(rowObj) {\\n  var btnadd = rowObj.el.getElementsByClassName(\"etatms_tariffs_lmstariff_add\");\\n\\n  if (btnadd && btnadd[0]) {\\n    btnadd[0].addEventListener(\\'click\\', function (e) {\\n      Object(_common__WEBPACK_IMPORTED_MODULE_2__[\"createAddLmsTariffElement\"])(e.target, rowObj, lmsTariffs);\\n    });\\n  }\\n\\n  var btndelete = rowObj.el.getElementsByClassName(\\'etatms_tariffs_tmstariff_delete\\');\\n\\n  if (btndelete && btndelete[0]) {\\n    btndelete[0].removeEventListener(\\'click\\', btndelete[0].click);\\n    btndelete[0].addEventListener(\"click\", eventRemoveTmsTariff);\\n  }\\n\\n  var btndeletelms = rowObj.el.getElementsByClassName(\\'etatms_tariffs_lmstariff_delete\\');\\n\\n  for (var i in btndeletelms) {\\n    if (btndeletelms[i].tagName) {\\n      btndeletelms[i].removeEventListener(\\'click\\', btndeletelms[i].click);\\n      btndeletelms[i].addEventListener(\"click\", function (e) {\\n        Object(_common__WEBPACK_IMPORTED_MODULE_2__[\"eventRemoveLmsTariff\"])(e, tmsSync);\\n      });\\n    }\\n  }\\n\\n  var btnCommit = rowObj.el.getElementsByClassName(\"etatms_tariffs_tmstariff_commit\");\\n\\n  if (btnCommit && btnCommit[0]) {\\n    btnCommit[0].addEventListener(\\'click\\', function (e) {\\n      commitTmsTariff(e, tmsSync[rowObj.id]);\\n    });\\n  }\\n\\n  var btnReset = rowObj.el.getElementsByClassName(\"etatms_tariffs_tmstariff_reset\");\\n\\n  if (btnReset && btnReset[0]) {\\n    btnReset[0].addEventListener(\\'click\\', function (e) {\\n      e.preventDefault();\\n      rowObj.lmsTariffs = new Proxy(Object.assign([], rowObj.orig.lmsTariffs), getLmsTariffsHandler(rowObj));\\n      var tmsTariff = new _tmsTariff_tmsTariff__WEBPACK_IMPORTED_MODULE_0__[\"default\"](rowObj);\\n      tmsTariff.rerenderLmsTariff();\\n    });\\n  }\\n}\\n\\nfunction renderTmsRow(rowObj) {\\n  var tmsTariff = new _tmsTariff_tmsTariff__WEBPACK_IMPORTED_MODULE_0__[\"default\"](rowObj);\\n  var el = tmsTariff.render();\\n  return el;\\n}\\n\\nfunction eventAddTmsTariff(e) {\\n  if (!newTmsTariff) {\\n    newTmsTariff = new _tmsTariff_tmsTariff__WEBPACK_IMPORTED_MODULE_0__[\"default\"]();\\n    newTmsTariff.globalTmsSync = tmsSync;\\n\\n    newTmsTariff.close = function (e) {\\n      newTmsTariff.tmsTariff.el.remove();\\n      newTmsTariff = null;\\n    };\\n\\n    newTmsTariff.save = function (e) {\\n      if (newTmsTariff.tmsTariff) {\\n        tmsSync[\\'new\\'] = newTmsTariff.tmsTariff;\\n      }\\n    };\\n\\n    newTmsTariff.commit = function (e, tmsRow) {\\n      Object(_common__WEBPACK_IMPORTED_MODULE_2__[\"commitTariff\"])(tmsRow).then(function (r) {\\n        var origRow = {\\n          id: tmsRow.id,\\n          lmsTariffs: Object.assign([], tmsRow.lmsTariffs),\\n          el: tmsRow.el\\n        };\\n        tmsRow.orig = origRow;\\n        tmsRow.lmsTariffs = new Proxy(tmsRow.lmsTariffs, getLmsTariffsHandler(tmsRow));\\n        tmsSync[tmsRow.id] = new Proxy(Object.assign(new _common__WEBPACK_IMPORTED_MODULE_2__[\"TmsObj\"](), tmsRow), getTmsTariffHandler(tmsRow));\\n        tmsSync[tmsRow.id].trigger = new Date();\\n\\n        if (r.data.id) {\\n          tmsSync[tmsRow.id].syncID = r.data.id;\\n        }\\n\\n        var newEl = renderTmsRow(tmsSync[tmsRow.id]);\\n        var par = tmsRow.el.parentNode;\\n        par.replaceChild(newEl, tmsRow.el);\\n        tmsSync[tmsRow.id].el = newEl;\\n        addRowEvents(tmsSync[tmsRow.id]);\\n        delete tmsSync[\\'new\\'];\\n        newTmsTariff = null;\\n      })[\"catch\"](function (err) {\\n        console.error(err);\\n      });\\n    };\\n\\n    newTmsTariff.reset = function (e, tmsRow) {\\n      if (tmsSync[\\'new\\']) {\\n        delete tmsSync[\\'new\\'];\\n      }\\n\\n      newTmsTariff.tmsTariff.el.remove();\\n      newTmsTariff = null;\\n    };\\n\\n    newTmsTariff.remove = function (e, tmsRow) {\\n      if (tmsSync[\\'new\\']) {\\n        delete tmsSync[\\'new\\'];\\n      }\\n\\n      newTmsTariff.tmsTariff.el.remove();\\n      newTmsTariff = null;\\n    };\\n\\n    var content = document.querySelector(\".etatms_tariffs_content\");\\n\\n    if (content) {\\n      content.prepend(newTmsTariff.render());\\n    }\\n  }\\n}\\n\\nfunction eventRemoveTmsTariff(e) {\\n  var tmsID = null;\\n  var tmsPar = Object(_common__WEBPACK_IMPORTED_MODULE_2__[\"getFirstParentByClass\"])(e.target, \"etatms_tariffs_row\");\\n\\n  if (tmsPar) {\\n    tmsID = tmsPar.getAttribute(\"data-etatms-tmsid\");\\n  }\\n\\n  if (tmsID) {\\n    removeTmsTariff(tmsID);\\n  }\\n}\\n\\nfunction removeTmsTariff(tmsid) {\\n  var url = \"/?m=etatmssynctariffs&ajax=delete\";\\n  var el = tmsSync[tmsid].el;\\n  var buttonsTmp = el.getElementsByClassName(\"etatms_tariffs_tmsbuttons\");\\n  var buttonsDiv = null;\\n  var buttonsContent = null;\\n\\n  var resetButtons = function resetButtons() {\\n    buttonsDiv.innerHTML = buttonsContent;\\n    var btnDel = buttonsDiv.getElementsByClassName(\"etatms_tariffs_tmstariff_delete\");\\n\\n    if (btnDel) {\\n      btnDel[0].addEventListener(\\'click\\', function (e) {\\n        eventRemoveTmsTariff(e, tmsSync);\\n      });\\n    }\\n  };\\n\\n  var r = confirm(\"Delete?\");\\n\\n  if (r) {\\n    if (buttonsTmp) {\\n      buttonsDiv = buttonsTmp[0];\\n      buttonsContent = buttonsDiv.innerHTML;\\n      buttonsDiv.innerText = \"\";\\n      var loader = document.createElement(\"i\");\\n      loader.classList = \"fa fa-spinner fa-spin\";\\n      buttonsDiv.appendChild(loader);\\n      axios__WEBPACK_IMPORTED_MODULE_1___default.a.post(url, {\\n        id: tmsSync[tmsid].syncID\\n      }).then(function (r) {\\n        resetButtons();\\n        tmsSync[tmsid].el.remove();\\n        delete tmsSync[tmsid];\\n      })[\"catch\"](function (err) {\\n        resetButtons();\\n        alert(\"Server error: \".concat(err));\\n      });\\n    }\\n\\n    setTimeout(function () {}, 2000);\\n  }\\n}\\n\\nfunction commitTmsTariff(e, tariff) {\\n  e.preventDefault();\\n  Object(_common__WEBPACK_IMPORTED_MODULE_2__[\"commitTariff\"])(tariff).then(function (r) {\\n    tariff.orig.lmsTariffs = Object.assign([], tariff.lmsTariffs); //JSON.parse(JSON.stringify(tariff.lmsTariffs))\\n\\n    tariff.trigger = new Date();\\n  })[\"catch\"](function (err) {\\n    console.error(err);\\n  });\\n}\\n\\ninit();\\nwindow.tmsSync = tmsSync;\\n\\n//# sourceURL=webpack:///./src/js/tariffs.js?')},\"./src/js/tmsTariff/new.tmpl.html\":\n/*!****************************************!*\\\n  !*** ./src/js/tmsTariff/new.tmpl.html ***!\n  \\****************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\\\"etatms_tariffs_row\\\\\">\\\\n  <div class=\\\\\"etatms_tariffs_tmsid\\\\\">\\\\n    <div class=\\\\\"etatms_tariffs_tmsbuttons\\\\\">\\\\n      <i class=\\\\\"fa fa-check etatms_tariffs_newtmstariff_save etatms_button\\\\\"></i>\\\\n      <i class=\\\\\"fa fa-times etatms_tariffs_newtmstariff_cancel etatms_button\\\\\"></i>\\\\n    </div>\\\\n  </div>\\\\n  <div class=\\\\\"etatms_tariffs_lmsids\\\\\" >\\\\n     <div class=\\\\\"etatms_tariffs_lmstariff etatms_tariffs_lmstariff_add etatms_button etatms_button-add\\\\\" ><i class=\\\\\"fa fa-plus\\\\\" aria-hidden=\\\\\"true\\\\\"></i></div>\\\\n  </div>\\\\n</div>\");\\n\\n//# sourceURL=webpack:///./src/js/tmsTariff/new.tmpl.html?')},\"./src/js/tmsTariff/tmsTariff.js\":\n/*!***************************************!*\\\n  !*** ./src/js/tmsTariff/tmsTariff.js ***!\n  \\***************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony import */ var _tmsTariff_tmpl_html__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tmsTariff.tmpl.html */ \"./src/js/tmsTariff/tmsTariff.tmpl.html\");\\n/* harmony import */ var _new_tmpl_html__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./new.tmpl.html */ \"./src/js/tmsTariff/new.tmpl.html\");\\n/* harmony import */ var hogan_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! hogan.js */ \"./node_modules/hogan.js/lib/hogan.js\");\\n/* harmony import */ var hogan_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(hogan_js__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _searchBox_searchbox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../searchBox/searchbox */ \"./src/js/searchBox/searchbox.js\");\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! axios */ \"./node_modules/axios/index.js\");\\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_4__);\\n/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../common */ \"./src/js/common.js\");\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nvar tmsTariff =\\n/*#__PURE__*/\\nfunction () {\\n  function tmsTariff(tmsObj) {\\n    _classCallCheck(this, tmsTariff);\\n\\n    this.el = null;\\n    this.id = null;\\n    this.url = \"/?m=etatmssynctariffs&ajax=tmstariffs\";\\n    this.tmsTariffs = {\\n      updated: 0,\\n      tariffs: []\\n    };\\n    this.lmsTariffs = [];\\n\\n    if (tmsObj) {\\n      this.tmsTariff = tmsObj;\\n    } else {\\n      this.tmsTariff = new _common__WEBPACK_IMPORTED_MODULE_5__[\"TmsObj\"]();\\n    }\\n\\n    this.globalTmsSync = [];\\n  }\\n\\n  _createClass(tmsTariff, [{\\n    key: \"updateTmsTariffs\",\\n    value: function updateTmsTariffs() {\\n      var _this2 = this;\\n\\n      var _this = this;\\n\\n      return new Promise(function (resolve, reject) {\\n        axios__WEBPACK_IMPORTED_MODULE_4___default.a.get(_this2.url).then(function (resp) {\\n          var now = new Date();\\n\\n          if (resp && resp.data) {\\n            _this.tmsTariffs.tariffs = [];\\n            _this.tmsTariffs.updated = now.getTime();\\n\\n            for (var i in resp.data) {\\n              var _tmsTariff = resp.data[i];\\n              var tariffObject = {};\\n\\n              if (_tmsTariff.enabled) {\\n                tariffObject.id = _tmsTariff.id;\\n                tariffObject.value = _tmsTariff.tarif_name;\\n\\n                _this.tmsTariffs.tariffs.push(tariffObject);\\n              }\\n            }\\n\\n            resolve(true);\\n          } else {\\n            resolve(false);\\n          }\\n        })[\"catch\"](function (err) {\\n          reject(err);\\n        });\\n      });\\n    }\\n  }, {\\n    key: \"commit\",\\n    value: function commit(e) {\\n      alert(\"Not implemented\");\\n    }\\n  }, {\\n    key: \"reset\",\\n    value: function reset(e) {\\n      alert(\"Not implemented\");\\n    }\\n  }, {\\n    key: \"remove\",\\n    value: function remove(e) {\\n      alert(\"Not implemented\");\\n    }\\n  }, {\\n    key: \"save\",\\n    value: function save(e) {\\n      alert(\"Not implemented\");\\n    }\\n  }, {\\n    key: \"close\",\\n    value: function close(e) {\\n      this.tmsTariff.el.remove();\\n    }\\n  }, {\\n    key: \"filterTmsTariffs\",\\n    value: function filterTmsTariffs(filterValue) {\\n      var tariffs = [];\\n\\n      for (var i in this.tmsTariffs.tariffs) {\\n        var t = this.tmsTariffs.tariffs[i];\\n        var pat = new RegExp(\".*\".concat(filterValue, \".*\"), \"i\"); ///.*filterValue.*/\\n\\n        if (pat.test(t.value)) {\\n          if (!this.globalTmsSync[t.id]) {\\n            tariffs.push(t);\\n          }\\n        }\\n      }\\n\\n      return tariffs;\\n    }\\n  }, {\\n    key: \"eventAddLmsTariff\",\\n    value: function eventAddLmsTariff(e, buttonAdd) {\\n      Object(_common__WEBPACK_IMPORTED_MODULE_5__[\"createAddLmsTariffElement\"])(null, this.tmsTariff.el, this.tmsTariff.lmsTariffs);\\n      return;\\n    }\\n  }, {\\n    key: \"renderTariffContent\",\\n    value: function renderTariffContent(el, name) {\\n      var _this3 = this;\\n\\n      var tmpl = \"\\\\n      \".concat(name, \" <div class=\\\\\"etatms_tariffs_tmsbuttons\\\\\">\\\\n        <div class=\\\\\"etatms_tariffs_tmsbuttons_commit etatms_tariffs_tmsbuttons_commit-show\\\\\">\\\\n          <a href class=\\\\\"etatms_tariffs_tmstariff_commit etatms_button\\\\\">commit</a>\\\\n          <a href class=\\\\\"etatms_tariffs_tmstariff_reset etatms_button\\\\\">reset</a>\\\\n        </div>\\\\n        <i class=\\\\\"fa fa-minus etatms_tariffs_tmstariff_delete etatms_button\\\\\" aria-hidden=\\\\\"true\\\\\"></i>\\\\n      </div>\\\\n    \");\\n      el.innerHTML = tmpl;\\n      var btnCommit = el.getElementsByClassName(\"etatms_tariffs_tmstariff_commit\");\\n\\n      if (btnCommit && btnCommit[0]) {\\n        btnCommit[0].addEventListener(\\'click\\', function (e) {\\n          e.preventDefault();\\n\\n          _this3.commit(e, _this3.tmsTariff);\\n        });\\n      }\\n\\n      var btnReset = el.getElementsByClassName(\"etatms_tariffs_tmstariff_reset\");\\n\\n      if (btnReset && btnReset[0]) {\\n        btnReset[0].addEventListener(\\'click\\', function (e) {\\n          e.preventDefault();\\n\\n          _this3.reset(e);\\n        });\\n      }\\n\\n      var btnDelete = el.getElementsByClassName(\"etatms_tariffs_tmstariff_delete\");\\n\\n      if (btnDelete && btnDelete[0]) {\\n        btnDelete[0].addEventListener(\\'click\\', function (e) {\\n          e.preventDefault();\\n\\n          _this3.remove(e);\\n        });\\n      }\\n    }\\n  }, {\\n    key: \"rerenderLmsTariff\",\\n    value: function rerenderLmsTariff() {\\n      var btnAdd = this.tmsTariff.el.querySelector(\".etatms_tariffs_lmstariff_add\");\\n      var lmsTariffsContainer = this.tmsTariff.el.querySelector(\".etatms_tariffs_lmsids\");\\n      lmsTariffsContainer.innerHTML = \"\";\\n\\n      for (var i in this.tmsTariff.lmsTariffs) {\\n        lmsTariffsContainer.appendChild(this.tmsTariff.lmsTariffs[i].el);\\n      }\\n\\n      lmsTariffsContainer.appendChild(btnAdd);\\n      this.tmsTariff.hideCommit();\\n    }\\n  }, {\\n    key: \"render\",\\n    value: function render() {\\n      var _this4 = this;\\n\\n      var _this = this;\\n\\n      var parser = new DOMParser();\\n      var htmpl = null;\\n      var htmlTmpl = null;\\n\\n      if (this.tmsTariff.id) {\\n        htmpl = hogan_js__WEBPACK_IMPORTED_MODULE_2___default.a.compile(_tmsTariff_tmpl_html__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\\n        htmlTmpl = parser.parseFromString(htmpl.render({\\n          id: this.tmsTariff.id,\\n          name: this.tmsTariff.name,\\n          syncID: this.tmsTariff.syncID,\\n          tariffs: this.tmsTariff.lmsTariffs\\n        }), \"text/html\");\\n      } else {\\n        var searchBox = new _searchBox_searchbox__WEBPACK_IMPORTED_MODULE_3__[\"default\"]();\\n\\n        searchBox.close = function (e) {\\n          _this.close();\\n        };\\n\\n        var searchBoxElement = searchBox.render(function (e) {\\n          var now = new Date();\\n\\n          if (!_this4.tmsTariffs.updated || _this4.tmsTariffs.updated < now - 1 * 60 * 1000) {\\n            _this4.updateTmsTariffs().then(function (r) {\\n              if (r) {\\n                searchBox.setContent(_this4.filterTmsTariffs(e.target.value));\\n              }\\n            })[\"catch\"](function (err) {\\n              console.error(err);\\n            });\\n          } else {\\n            searchBox.setContent(_this4.filterTmsTariffs(e.target.value));\\n          }\\n        });\\n        htmpl = hogan_js__WEBPACK_IMPORTED_MODULE_2___default.a.compile(_new_tmpl_html__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\\n        htmlTmpl = parser.parseFromString(htmpl.render(), \"text/html\");\\n        var searchBoxPlace = htmlTmpl.getElementsByClassName(\"etatms_tariffs_tmsid\");\\n\\n        if (searchBoxPlace && searchBoxPlace[0]) {\\n          searchBoxPlace[0].prepend(searchBoxElement);\\n        }\\n\\n        var btnClose = htmlTmpl.getElementsByClassName(\"etatms_tariffs_newtmstariff_cancel\");\\n\\n        if (btnClose && btnClose[0]) {\\n          btnClose[0].addEventListener(\"click\", function (e) {\\n            _this.close();\\n          });\\n        }\\n\\n        var saveEvent = function saveEvent(e) {\\n          var tmsContent = _this4.tmsTariff.el.getElementsByClassName(\"etatms_tariffs_tmsid\");\\n\\n          if (tmsContent && tmsContent[0]) {\\n            _this4.tmsTariff.id = searchBox.selectedContent.id;\\n            _this4.tmsTariff.name = searchBox.selectedContent.value;\\n\\n            _this4.renderTariffContent(tmsContent[0], searchBox.selectedContent.value);\\n          }\\n\\n          _this4.save();\\n        };\\n\\n        var btnSave = htmlTmpl.getElementsByClassName(\"etatms_tariffs_newtmstariff_save\");\\n\\n        if (btnSave && btnSave[0]) {\\n          btnSave[0].addEventListener(\"click\", saveEvent); // e=>{\\n          //   const tmsContent = this.tmsTariff.el.getElementsByClassName(\"etatms_tariffs_tmsid\");\\n          //   if(tmsContent && tmsContent[0]){\\n          //     this.tmsTariff.id = searchBox.selectedContent.id\\n          //     this.tmsTariff.name = searchBox.selectedContent.value\\n          //     this.renderTariffContent(tmsContent[0], searchBox.selectedContent.value)\\n          //   }\\n          //   this.save()\\n          // })\\n        }\\n\\n        searchBox.save = saveEvent;\\n      }\\n\\n      this.tmsTariff.el = htmlTmpl.querySelector(\"div\");\\n      var buttonAdd = this.tmsTariff.el.querySelector(\\'.etatms_tariffs_lmstariff_add\\');\\n\\n      for (var i in this.tmsTariff.lmsTariffs) {\\n        var t = this.tmsTariff.lmsTariffs[i];\\n        buttonAdd.parentNode.insertBefore(t.el, buttonAdd);\\n      }\\n\\n      if (!this.tmsTariff.id) {\\n        var addLmsTariffBtn = this.tmsTariff.el.getElementsByClassName(\"etatms_tariffs_lmstariff_add\");\\n\\n        if (addLmsTariffBtn && addLmsTariffBtn[0]) {\\n          addLmsTariffBtn[0].addEventListener(\\'click\\', function (e) {\\n            Object(_common__WEBPACK_IMPORTED_MODULE_5__[\"createAddLmsTariffElement\"])(null, _this4.tmsTariff, _this4.tmsTariff.lmsTariffs);\\n          });\\n        }\\n      }\\n\\n      return this.tmsTariff.el;\\n    }\\n  }]);\\n\\n  return tmsTariff;\\n}();\\n\\n/* harmony default export */ __webpack_exports__[\"default\"] = (tmsTariff);\\n\\n//# sourceURL=webpack:///./src/js/tmsTariff/tmsTariff.js?')},\"./src/js/tmsTariff/tmsTariff.tmpl.html\":\n/*!**********************************************!*\\\n  !*** ./src/js/tmsTariff/tmsTariff.tmpl.html ***!\n  \\**********************************************/\n/*! exports provided: default */function(module,__webpack_exports__,__webpack_require__){\"use strict\";eval('__webpack_require__.r(__webpack_exports__);\\n/* harmony default export */ __webpack_exports__[\"default\"] = (\"<div class=\\\\\"etatms_tariffs_row\\\\\" data-etatms-tmsname=\\\\\"{{name}}\\\\\" data-etatms-tmsid=\\\\\"{{id}}\\\\\" data-etatms-id=\\\\\"{{syncID}}\\\\\">\\\\n  <div class=\\\\\"etatms_tariffs_tmsid\\\\\">\\\\n    <div class=\\\\\"etatms_tariffs_tmsname\\\\\">\\\\n      {{name}}\\\\n    </div>\\\\n    <div class=\\\\\"etatms_tariffs_tmsbuttons\\\\\">\\\\n      <div class=\\\\\"etatms_tariffs_tmsbuttons_commit\\\\\">\\\\n        <a href class=\\\\\"etatms_tariffs_tmstariff_save\\\\\">commit</a>\\\\n        <a href class=\\\\\"etatms_tariffs_tmstariff_reset\\\\\">reset</a>\\\\n      </div>\\\\n      <i class=\\\\\"fa fa-minus etatms_tariffs_tmstariff_delete etatms_button\\\\\" aria-hidden=\\\\\"true\\\\\"></i>\\\\n    </div>\\\\n  </div>\\\\n  <div class=\\\\\"etatms_tariffs_lmsids\\\\\" >\\\\n    <div class=\\\\\"etatms_tariffs_lmstariff etatms_tariffs_lmstariff_add etatms_button etatms_button-add\\\\\" ><i class=\\\\\"fa fa-plus\\\\\" aria-hidden=\\\\\"true\\\\\"></i></div>\\\\n  </div>\\\\n</div>\");\\n\\n//# sourceURL=webpack:///./src/js/tmsTariff/tmsTariff.tmpl.html?')}}]);","extractedComments":[]}