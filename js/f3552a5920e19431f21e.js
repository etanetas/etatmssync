!function(t){function e(e){for(var n,r,f=e[0],l=e[1],o=e[2],m=0,d=[];m<f.length;m++)r=f[m],a[r]&&d.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(c&&c(e);d.length;)d.shift()();return i.push.apply(i,o||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,f=1;f<s.length;f++){var l=s[f];0!==a[l]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},a={1:0},i=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/js/";var f=window.webpackJsonp=window.webpackJsonp||[],l=f.push.bind(f);f.push=e,f=f.slice();for(var o=0;o<f.length;o++)e(f[o]);var c=l;i.push([34,2]),s()}({14:function(t,e,s){},3:function(t,e,s){},32:function(t,e,s){},34:function(t,e,s){"use strict";s.r(e);var n=s(2),a=s.n(n);s(14);function i(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=null,this.selectedElement=null,this.selectedClass="etatms_searchbox-selected",this.contentElement=null,this.selectedContent=null,this.content=[]}var e,s,n;return e=t,(s=[{key:"getContentElement",value:function(){if(this.contentElement)return this.contentElement;var t=this.el.getElementsByClassName("etatms_searchbox-content");return t?(this.contentElement=t[0],this.contentElement):document.createElement("div")}},{key:"show",value:function(){this.getContentElement().classList.add("etatms_searchbox-content_show")}},{key:"hide",value:function(){this.getContentElement().classList.remove("etatms_searchbox-content_show")}},{key:"setSelected",value:function(t){t&&(this.selectedElement&&this.selectedElement.classList.remove(this.selectedClass),t.classList.add(this.selectedClass),t.scrollIntoView({block:"nearest"}),this.selectedElement=t)}},{key:"setLoading",value:function(){var t=this.el.getElementsByClassName("etatms_searchbox-loading");t&&t[0].classList.add("etatms_searchbox-loading_show")}},{key:"unsetLoading",value:function(){var t=this.el.getElementsByClassName("etatms_searchbox-loading");t&&t[0].classList.remove("etatms_searchbox-loading_show")}},{key:"selectNext",value:function(){this.selectedElement&&this.selectedElement.nextSibling?this.setSelected(this.selectedElement.nextSibling):this.content[0]&&this.setSelected(this.content[0].el)}},{key:"selectPrevious",value:function(){this.selectedElement&&this.selectedElement.previousSibling?this.setSelected(this.selectedElement.previousSibling):this.content[0]&&this.setSelected(this.content[this.content.length-1].el)}},{key:"renderContent",value:function(){var t=this.getContentElement();t.innerHTML="",this.content.length>0&&(this.setSelected(this.content[0].el),this.content.forEach(function(e){t.appendChild(e.el)}))}},{key:"setPlaceholder",value:function(t){this.placeHolder=t}},{key:"setContent",value:function(t){var e=this,s=this;if(this.content=[],t){var n=0;t.forEach(function(t){var a={};a.el=document.createElement("a"),t.value?(a.el.innerHTML=t.value,a.value=t.value,a.id=t.id):(a.el.innerHTML=t,a.value=t),a.el.setAttribute("data-etatms-ind",n),a.el.addEventListener("mouseenter",function(t){s.setSelected(t.target)}),a.el.addEventListener("click",function(t){var n=t.target.getAttribute("data-etatms-ind");if(n){var a=e.el.getElementsByTagName("input");if(a)a[0].value=e.content[n].value,e.selectedContent=e.content[n],s.hide()}}),s.content.push(a),n++})}this.renderContent()}},{key:"clear",value:function(){this.el=null,this.selectedElement=null,this.contentElement=null,this.content=[]}},{key:"close",value:function(){this.el.remove(),this.clear()}},{key:"save",value:function(){}},{key:"render",value:function(t){var e=this;this.clear();var s=(new DOMParser).parseFromString('<div class="etatms_searchbox">\n  <input type="text" placeholder="Search.." class="etatms_searchbox-input">\n  <i class="fa fa-spinner fa-spin etatms_searchbox-loading" aria-hidden="true"></i>\n  <div class="etatms_searchbox-content">\n  </div>\n</div>',"text/html").getElementsByTagName("div"),n=this;if(s){this.el=s[0];var a=this.el.getElementsByTagName("input");if(a){var i=a[0];this.placeHolder&&(i.placeholder=this.placeHolder),i.addEventListener("focus",function(s){t(s),e.show()}),i.addEventListener("keydown",function(t){switch(t.keyCode){case 38:if(n.getContentElement().classList.contains("etatms_searchbox-content_show")){t.preventDefault(),n.selectPrevious();break}break;case 40:if(n.getContentElement().classList.contains("etatms_searchbox-content_show")){t.preventDefault(),n.selectNext();break}}}),i.addEventListener("keyup",function(s){switch("none"==n.contentElement.style.display&&n.show(),s.keyCode){case 13:var a=e.selectedElement.getAttribute("data-etatms-ind");!e.getContentElement().classList.contains("etatms_searchbox-content_show")&&e.selectedContent&&e.save(),a&&(s.target.value=e.content[a].value,e.selectedContent=e.content[a],n.hide());break;case 38:if(n.getContentElement().classList.contains("etatms_searchbox-content_show"))break;n.show();case 40:if(n.getContentElement().classList.contains("etatms_searchbox-content_show"))break;n.show();case 27:n.getContentElement().classList.contains("etatms_searchbox-content_show")?n.hide():n.close();break;default:t&&t(s,n)}})}}return this.el}}])&&i(e.prototype,s),n&&i(e,n),t}(),f=s(1),l=s.n(f);s(32);function o(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=null,this.id="",e.id&&(this.id=e.id),this.name="",e.name&&(this.name=e.name),this.removeEvent=function(t){console.log("not implemented")}}var e,s,n;return e=t,(s=[{key:"close",value:function(){this.el.remove()}},{key:"render",value:function(){var t=new DOMParser,e=a.a.compile('<div class="etatms_tariffs_lmstariff" data-etatms-lmsid="{{id}}">\n    {{name}}({{id}}) <div class="etatms_button etatms_tariffs_lmstariff_delete"><i class="fa fa-minus" aria-hidden="true"></i></div>\n</div>'),s=t.parseFromString(e.render({id:this.id,name:this.name}),"text/html").getElementsByTagName("div");s&&(this.el=s[0]);var n=this.el.getElementsByClassName("etatms_tariffs_lmstariff_delete");return n&&n[0].addEventListener("click",this.removeEvent),this.el}}])&&o(e.prototype,s),n&&o(e,n),t}();function m(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=null,this.lmsTariffs=[],this.orig=null,this.trigger=!1,this.el=null}var e,s,n;return e=t,(s=[{key:"changedLms",value:function(){return JSON.stringify(this.orig.lmsTariffs)!=JSON.stringify(this.lmsTariffs)}},{key:"changed",value:function(){return!1}},{key:"showCommit",value:function(){var t=this.el.querySelector(".etatms_tariffs_tmsbuttons_commit");t&&t.classList.add("etatms_tariffs_tmsbuttons_commit-show")}},{key:"hideCommit",value:function(){var t=this.el.querySelector(".etatms_tariffs_tmsbuttons_commit");t&&t.classList.remove("etatms_tariffs_tmsbuttons_commit-show")}}])&&m(e.prototype,s),n&&m(e,n),t}();function u(t,e){if(""==e)return null;for(;t.parentNode&&t.parentNode.classList;){var s=t.parentNode;if(t.parentNode.classList.contains(e))return s;t=s}}function v(t,e,s){var n=null,a=null,i=u(t.target,"etatms_tariffs_lmstariff");i&&(n=i.getAttribute("data-etatms-lmsid"));var r=u(t.target,"etatms_tariffs_row");r&&(a=r.getAttribute("data-etatms-tmsid")),n?s?h(s,n):a&&e[a]?h(s=e[a],n):console.error("Failed to find required tmsRow, tmsid:".concat(s)):console.error("Failed to find required lmsid:".concat(n))}function h(t,e){if(t){var s=function(t,e){for(var s in t)if(t[s].id==e)return{ind:s,item:t[s]}}(t.lmsTariffs,e);t.lmsTariffs.splice(s.ind,1),s.item.el.remove()}else console.warn("Can't find tms tariff")}function _(t){var e={id:t.syncID,tmsID:t.id,lmsTariffs:t.lmsTariffs},s=t.el.getElementsByClassName("etatms_tariffs_tmsbuttons"),n=null,a=document.createElement("i");return a.classList="fa fa-spinner fa-spin",a.style.marginRight="20px",s&&s[0]&&(n=s[0]).parentNode.replaceChild(a,n),new Promise(function(t,s){l.a.post("/?m=etatmssynctariffs&ajax=commit",e).then(function(e){a.parentNode.replaceChild(n,a),t(e)}).catch(function(t){a.parentNode.replaceChild(n,a),s(t)})})}function p(t,e,s){var n=e.el.getElementsByClassName("etatms_tariffs_lmstariff_add"),a=null;if(n&&n[0]&&(a=n[0]),a){var i=new r,f=document.createElement("div"),o=null,m=e.el.getElementsByClassName("etatms_tariffs_lmsids");m&&m[0]&&(o=m[0]),a.remove(),f.setAttribute("data-etatms-addLmsTariff",""),f.classList=["etatms_tariffs_lmstariff"],f.appendChild(i.render(function(t){!function(t,e,s){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a="/?m=etatmssynctariffs&ajax=lmstariffs";t.target.value&&(a+="&q=".concat(t.target.value)),e.setLoading(),l.a.get(a).then(function(t){t.data&&(s=[],t.data.forEach(function(t){if(n){if(!function(t,e){for(var s in e)if(e[s].id==t)return!0;return!1}(t.id,n)){var e={value:t.name,id:t.id};s.push(e)}}else{var a={value:t.name,id:t.id};s.push(a)}})),e.setContent(s),e.unsetLoading()})}(t,i,s,e.lmsTariffs)})),i.setContent(s);var d=document.createElement("i"),h=function(t){if(i.selectedContent&&i.selectedContent.id){var s=u(f,"etatms_tariffs_row");if(s){s.getAttribute("data-etatms-tmsid");!function(t,e,s,n){var a=new c({id:t,name:e});a.removeEvent=function(t){n&&v(t,null,n)};var i=a.render();s.appendChild(i),n&&n.lmsTariffs.push({id:t,name:e,el:i})}(i.selectedContent.id,i.selectedContent.value,o,e),f.remove(),o.appendChild(a)}}};d.classList=["fa fa-check etatms_tariffs_lmstariff_add"],d.addEventListener("click",h),i.save=h,f.appendChild(d);var _=document.createElement("i");_.classList=["fa fa-times etatms_tariffs_lmstariff_cancel"],f.appendChild(_),_.addEventListener("click",function(t){f.remove(),o.appendChild(a)}),o.appendChild(f),i.close=function(t){f.remove(),o.appendChild(a)}}}function g(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var y=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=null,this.id=null,this.url="/?m=etatmssynctariffs&ajax=tmstariffs",this.tmsTariffs={updated:0,tariffs:[]},this.lmsTariffs=[],this.tmsTariff=e||new d,this.globalTmsSync=[]}var e,s,n;return e=t,(s=[{key:"updateTmsTariffs",value:function(){var t=this,e=this;return new Promise(function(s,n){l.a.get(t.url).then(function(t){var n=new Date;if(t&&t.data){for(var a in e.tmsTariffs.tariffs=[],e.tmsTariffs.updated=n.getTime(),t.data){var i=t.data[a],r={};i.enabled&&(r.id=i.id,r.value=i.tarif_name,e.tmsTariffs.tariffs.push(r))}s(!0)}else s(!1)}).catch(function(t){n(t)})})}},{key:"commit",value:function(t){alert("Not implemented")}},{key:"reset",value:function(t){alert("Not implemented")}},{key:"remove",value:function(t){alert("Not implemented")}},{key:"save",value:function(t){alert("Not implemented")}},{key:"close",value:function(t){this.tmsTariff.el.remove()}},{key:"filterTmsTariffs",value:function(t){var e=[];for(var s in this.tmsTariffs.tariffs){var n=this.tmsTariffs.tariffs[s];new RegExp(".*".concat(t,".*"),"i").test(n.value)&&(this.globalTmsSync[n.id]||e.push(n))}return e}},{key:"eventAddLmsTariff",value:function(t,e){p(0,this.tmsTariff.el,this.tmsTariff.lmsTariffs)}},{key:"renderTariffContent",value:function(t,e){var s=this,n="\n      ".concat(e,' <div class="etatms_tariffs_tmsbuttons">\n        <div class="etatms_tariffs_tmsbuttons_commit etatms_tariffs_tmsbuttons_commit-show">\n          <a href class="etatms_tariffs_tmstariff_commit etatms_button">commit</a>\n          <a href class="etatms_tariffs_tmstariff_reset etatms_button">reset</a>\n        </div>\n        <i class="fa fa-minus etatms_tariffs_tmstariff_delete etatms_button" aria-hidden="true"></i>\n      </div>\n    ');t.innerHTML=n;var a=t.getElementsByClassName("etatms_tariffs_tmstariff_commit");a&&a[0]&&a[0].addEventListener("click",function(t){t.preventDefault(),s.commit(t,s.tmsTariff)});var i=t.getElementsByClassName("etatms_tariffs_tmstariff_reset");i&&i[0]&&i[0].addEventListener("click",function(t){t.preventDefault(),s.reset(t)});var r=t.getElementsByClassName("etatms_tariffs_tmstariff_delete");r&&r[0]&&r[0].addEventListener("click",function(t){t.preventDefault(),s.remove(t)})}},{key:"rerenderLmsTariff",value:function(){var t=this.tmsTariff.el.querySelector(".etatms_tariffs_lmstariff_add"),e=this.tmsTariff.el.querySelector(".etatms_tariffs_lmsids");for(var s in e.innerHTML="",this.tmsTariff.lmsTariffs)e.appendChild(this.tmsTariff.lmsTariffs[s].el);e.appendChild(t),this.tmsTariff.hideCommit()}},{key:"render",value:function(){var t=this,e=this,s=new DOMParser,n=null,i=null;if(this.tmsTariff.id)n=a.a.compile('<div class="etatms_tariffs_row" data-etatms-tmsname="{{name}}" data-etatms-tmsid="{{id}}" data-etatms-id="{{syncID}}">\n  <div class="etatms_tariffs_tmsid">\n    <div class="etatms_tariffs_tmsname">\n      {{name}}\n    </div>\n    <div class="etatms_tariffs_tmsbuttons">\n      <div class="etatms_tariffs_tmsbuttons_commit">\n        <a href class="etatms_tariffs_tmstariff_save">commit</a>\n        <a href class="etatms_tariffs_tmstariff_reset">reset</a>\n      </div>\n      <i class="fa fa-minus etatms_tariffs_tmstariff_delete etatms_button" aria-hidden="true"></i>\n    </div>\n  </div>\n  <div class="etatms_tariffs_lmsids" >\n    <div class="etatms_tariffs_lmstariff etatms_tariffs_lmstariff_add etatms_button etatms_button-add" ><i class="fa fa-plus" aria-hidden="true"></i></div>\n  </div>\n</div>'),i=s.parseFromString(n.render({id:this.tmsTariff.id,name:this.tmsTariff.name,syncID:this.tmsTariff.syncID,tariffs:this.tmsTariff.lmsTariffs}),"text/html");else{var f=new r;f.close=function(t){e.close()};var l=f.render(function(e){var s=new Date;!t.tmsTariffs.updated||t.tmsTariffs.updated<s-6e4?t.updateTmsTariffs().then(function(s){s&&f.setContent(t.filterTmsTariffs(e.target.value))}).catch(function(t){console.error(t)}):f.setContent(t.filterTmsTariffs(e.target.value))});n=a.a.compile('<div class="etatms_tariffs_row">\n  <div class="etatms_tariffs_tmsid">\n    <div class="etatms_tariffs_tmsbuttons">\n      <i class="fa fa-check etatms_tariffs_newtmstariff_save etatms_button"></i>\n      <i class="fa fa-times etatms_tariffs_newtmstariff_cancel etatms_button"></i>\n    </div>\n  </div>\n  <div class="etatms_tariffs_lmsids" >\n     <div class="etatms_tariffs_lmstariff etatms_tariffs_lmstariff_add etatms_button etatms_button-add" ><i class="fa fa-plus" aria-hidden="true"></i></div>\n  </div>\n</div>');var o=(i=s.parseFromString(n.render(),"text/html")).getElementsByClassName("etatms_tariffs_tmsid");o&&o[0]&&o[0].prepend(l);var c=i.getElementsByClassName("etatms_tariffs_newtmstariff_cancel");c&&c[0]&&c[0].addEventListener("click",function(t){e.close()});var m=function(e){var s=t.tmsTariff.el.getElementsByClassName("etatms_tariffs_tmsid");s&&s[0]&&(t.tmsTariff.id=f.selectedContent.id,t.tmsTariff.name=f.selectedContent.value,t.renderTariffContent(s[0],f.selectedContent.value)),t.save()},d=i.getElementsByClassName("etatms_tariffs_newtmstariff_save");d&&d[0]&&d[0].addEventListener("click",m),f.save=m}this.tmsTariff.el=i.querySelector("div");var u=this.tmsTariff.el.querySelector(".etatms_tariffs_lmstariff_add");for(var v in this.tmsTariff.lmsTariffs){var h=this.tmsTariff.lmsTariffs[v];u.parentNode.insertBefore(h.el,u)}if(!this.tmsTariff.id){var _=this.tmsTariff.el.getElementsByClassName("etatms_tariffs_lmstariff_add");_&&_[0]&&_[0].addEventListener("click",function(e){p(0,t.tmsTariff,t.tmsTariff.lmsTariffs)})}return this.tmsTariff.el}}])&&g(e.prototype,s),n&&g(e,n),t}(),b=(s(3),[]);function T(t){return{set:function(e,s,n){return e.changed()||e.changedLms()?t.showCommit():t.hideCommit(),e[s]=n,!0}}}function E(t){return{set:function(e,s,n){return e[s]=n,t.changedLms()||t.changed()?t.showCommit():t.hideCommit(),!0},get:function(t,e){return t[e]}}}var w={},C=null;function k(t){var e=t.el.getElementsByClassName("etatms_tariffs_lmstariff_add");e&&e[0]&&e[0].addEventListener("click",function(e){p(e.target,t,b)});var s=t.el.getElementsByClassName("etatms_tariffs_tmstariff_delete");s&&s[0]&&(s[0].removeEventListener("click",s[0].click),s[0].addEventListener("click",N));var n=t.el.getElementsByClassName("etatms_tariffs_lmstariff_delete");for(var a in n)n[a].tagName&&(n[a].removeEventListener("click",n[a].click),n[a].addEventListener("click",function(t){v(t,w)}));var i=t.el.getElementsByClassName("etatms_tariffs_tmstariff_commit");i&&i[0]&&i[0].addEventListener("click",function(e){!function(t,e){t.preventDefault(),_(e).then(function(t){e.orig.lmsTariffs=Object.assign([],e.lmsTariffs),e.trigger=new Date}).catch(function(t){console.error(t)})}(e,w[t.id])});var r=t.el.getElementsByClassName("etatms_tariffs_tmstariff_reset");r&&r[0]&&r[0].addEventListener("click",function(e){e.preventDefault(),t.lmsTariffs=new Proxy(Object.assign([],t.orig.lmsTariffs),E(t)),new y(t).rerenderLmsTariff()})}function L(t){if(!C){(C=new y).globalTmsSync=w,C.close=function(t){C.tmsTariff.el.remove(),C=null},C.save=function(t){C.tmsTariff&&(w.new=C.tmsTariff)},C.commit=function(t,e){_(e).then(function(t){var s={id:e.id,lmsTariffs:Object.assign([],e.lmsTariffs),el:e.el};e.orig=s,e.lmsTariffs=new Proxy(e.lmsTariffs,E(e)),w[e.id]=new Proxy(Object.assign(new d,e),T(e)),w[e.id].trigger=new Date,t.data.id&&(w[e.id].syncID=t.data.id);var n,a=(n=w[e.id],new y(n).render());e.el.parentNode.replaceChild(a,e.el),w[e.id].el=a,k(w[e.id]),delete w.new,C=null}).catch(function(t){console.error(t)})},C.reset=function(t,e){w.new&&delete w.new,C.tmsTariff.el.remove(),C=null},C.remove=function(t,e){w.new&&delete w.new,C.tmsTariff.el.remove(),C=null};var e=document.querySelector(".etatms_tariffs_content");e&&e.prepend(C.render())}}function N(t){var e=null,s=u(t.target,"etatms_tariffs_row");s&&(e=s.getAttribute("data-etatms-tmsid")),e&&function(t){var e=w[t].el.getElementsByClassName("etatms_tariffs_tmsbuttons"),s=null,n=null,a=function(){s.innerHTML=n;var t=s.getElementsByClassName("etatms_tariffs_tmstariff_delete");t&&t[0].addEventListener("click",function(t){N(t)})};if(confirm("Delete?")){if(e){s=e[0],n=s.innerHTML,s.innerText="";var i=document.createElement("i");i.classList="fa fa-spinner fa-spin",s.appendChild(i),l.a.post("/?m=etatmssynctariffs&ajax=delete",{id:w[t].syncID}).then(function(e){a(),w[t].el.remove(),delete w[t]}).catch(function(t){a(),alert("Server error: ".concat(t))})}setTimeout(function(){},2e3)}}(e)}!function(){var t=document.querySelector(".etatms_tariffs_tmstariff_add");t&&t.addEventListener("click",L);var e=document.querySelector(".etatms_header_syncbutton");e.addEventListener("click",function(t){e.classList.remove("etatms_header_syncbutton_error"),e.innerHTML;var s=document.createElement("i");s.classList="fa fa-spinner fa-spin",e.prepend(s),e.classList.add("button-centered"),new Promise(function(t,e){l.a.post("/?m=etatmssynctariffs&ajax=syncmiddleware").then(function(e){t()}).catch(function(t){e(t)})}).then(function(t){s.remove()}).catch(function(t){console.log("err"),s.remove(),e.classList.add("etatms_header_syncbutton_error")})});var s=document.querySelectorAll(".etatms_tariffs_row");if(s){var n=/\d+/;for(var a in s)if(n.test(a)){var i=s[a],r=new d,f=i.getAttribute("data-etatms-tmsid");f||console.error("Failed to get tms id");var o=i.getAttribute("data-etatms-tmsname");o||console.error("Failed to get tms name");var c=i.getAttribute("data-etatms-id");c||console.error("Failed to get sync id"),r.el=i,r.id=f,r.syncID=c,r.name=o;var m=[],u=i.getElementsByClassName("etatms_tariffs_lmstariff");for(var v in u)if(u[v]){var h=u[v];if(h.tagName){var _=h.getAttribute("data-etatms-lmsid"),p=h.getAttribute("data-etatms-lmsname");_&&m.push({id:_,name:p,el:h})}}var g=Object.assign({},r);r.orig=g;var y=Object.assign([],m);r.orig.lmsTariffs=y,r.lmsTariffs=new Proxy(m,E(r)),w[f]=new Proxy(r,T(r)),k(r)}}}(),window.tmsSync=w}});